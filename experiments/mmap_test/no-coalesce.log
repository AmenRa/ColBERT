$ python3 colbert/tests/mmap_test.py --target_dir=./experiments/mmap_test --test_iter=1 --no-coalesce

Starting MMap stress test with coalescing set to False, 354 residuals, and 100 compute cycles

Starting random file read control test from /lfs/0/udingank/msmarco.nbits-2.latest
Starting iteration 0
reading file /lfs/0/udingank/msmarco.nbits-2.latest/0.residuals.pt
reading file /lfs/0/udingank/msmarco.nbits-2.latest/100.residuals.pt
reading file /lfs/0/udingank/msmarco.nbits-2.latest/200.residuals.pt
reading file /lfs/0/udingank/msmarco.nbits-2.latest/300.residuals.pt
computation cycle 0
computation cycle 10
computation cycle 20
computation cycle 30
computation cycle 40
computation cycle 50
computation cycle 60
computation cycle 70
computation cycle 80
computation cycle 90

Starting random file read mmap test from /lfs/0/udingank/msmarco.nbits-2.latest
Starting iteration 0
reading file /lfs/0/udingank/msmarco.nbits-2.latest/0.residuals.pt
reading file /lfs/0/udingank/msmarco.nbits-2.latest/100.residuals.pt
reading file /lfs/0/udingank/msmarco.nbits-2.latest/200.residuals.pt
reading file /lfs/0/udingank/msmarco.nbits-2.latest/300.residuals.pt
computation cycle 0
computation cycle 10
computation cycle 20
computation cycle 30
computation cycle 40
computation cycle 50
computation cycle 60
computation cycle 70
computation cycle 80
computation cycle 90

Saving Results
--------------
Results saved to ./experiments/mmap_test/results-ssd.png

control_basic: 19.14228 GB
mmap_basic: 0.00428 GB
control_compute: 19.19769 GB
mmap_compute: 2.47862 GB

Timing Summary
--------------

  Timing   |  Control  |  MMap
  -----------|-----------|--------------
   read time | 11.12699  |  0.02468
    copy time | 0.03663  |  0.03294
      compute  | 0.00121  |  0.00079
         total   | 6.54602  |  6.04143

         Starting random file read control test from /lfs/1/udingank/msmarco.nbits-2.latest
         Starting iteration 0
         reading file /lfs/1/udingank/msmarco.nbits-2.latest/0.residuals.pt
         reading file /lfs/1/udingank/msmarco.nbits-2.latest/100.residuals.pt
         reading file /lfs/1/udingank/msmarco.nbits-2.latest/200.residuals.pt
         reading file /lfs/1/udingank/msmarco.nbits-2.latest/300.residuals.pt
         computation cycle 0
         computation cycle 10
         computation cycle 20
         computation cycle 30
         computation cycle 40
         computation cycle 50
         computation cycle 60
         computation cycle 70
         computation cycle 80
         computation cycle 90

         Starting random file read mmap test from /lfs/1/udingank/msmarco.nbits-2.latest
         Starting iteration 0
         reading file /lfs/1/udingank/msmarco.nbits-2.latest/0.residuals.pt
         reading file /lfs/1/udingank/msmarco.nbits-2.latest/100.residuals.pt
         reading file /lfs/1/udingank/msmarco.nbits-2.latest/200.residuals.pt
         reading file /lfs/1/udingank/msmarco.nbits-2.latest/300.residuals.pt
         computation cycle 0
         computation cycle 10
         computation cycle 20
         computation cycle 30
         computation cycle 40
         computation cycle 50
         computation cycle 60
         computation cycle 70
         computation cycle 80
         computation cycle 90

         Saving Results
         --------------
         Results saved to ./experiments/mmap_test/results-hdd.png

         control_basic: 19.14109 GB
         mmap_basic: 0.00326 GB
         control_compute: 19.19535 GB
         mmap_compute: 2.39229 GB

         Timing Summary
         --------------

           Timing   |  Control  |  MMap
           -----------|-----------|--------------
            read time | 12.37459  |  0.02560
             copy time | 0.03645  |  0.03525
               compute  | 0.00088  |  0.00103
                  total   | 6.65379  |  6.54521

                  Finished MMap stress test
