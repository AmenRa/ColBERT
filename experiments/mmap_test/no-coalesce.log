$ python3 colbert/tests/mmap_test.py --target_dir=./experiments/mmap_test --test_iter=1 --no-coalesce

Starting MMap stress test with coalescing set to False, 354 residuals, and 100 compute cycles

Starting random file read control test from /lfs/0/udingank/msmarco.nbits-2.latest
Starting iteration 0
reading file /lfs/0/udingank/msmarco.nbits-2.latest/0.residuals.pt
reading file /lfs/0/udingank/msmarco.nbits-2.latest/100.residuals.pt
reading file /lfs/0/udingank/msmarco.nbits-2.latest/200.residuals.pt
reading file /lfs/0/udingank/msmarco.nbits-2.latest/300.residuals.pt
computation cycle 0
computation cycle 10
computation cycle 20
computation cycle 30
computation cycle 40
computation cycle 50
computation cycle 60
computation cycle 70
computation cycle 80
computation cycle 90

Starting random file read mmap test from /lfs/0/udingank/msmarco.nbits-2.latest
Starting iteration 0
reading file /lfs/0/udingank/msmarco.nbits-2.latest/0.residuals.pt
reading file /lfs/0/udingank/msmarco.nbits-2.latest/100.residuals.pt
reading file /lfs/0/udingank/msmarco.nbits-2.latest/200.residuals.pt
reading file /lfs/0/udingank/msmarco.nbits-2.latest/300.residuals.pt
computation cycle 0
computation cycle 10
computation cycle 20
computation cycle 30
computation cycle 40
computation cycle 50
computation cycle 60
computation cycle 70
computation cycle 80
computation cycle 90

Saving Results
--------------
Results saved to ./experiments/mmap_test/results-ssd-no-coalesce.png

control_basic: 19.14260 GB
mmap_basic: 0.00463 GB
control_compute: 19.14844 GB
mmap_compute: 0.01720 GB

Timing Summary
--------------

  Timing              |  Control (ms)  |  MMap (ms)
  ----------------------|----------------|--------------
   initial load         | 11217          |  24
    copy + compute avg   | 1.18          |  0.82
     total copy + compute | 2527          |  2416

     Starting random file read control test from /lfs/1/udingank/msmarco.nbits-2.latest
     Starting iteration 0
     reading file /lfs/1/udingank/msmarco.nbits-2.latest/0.residuals.pt
     reading file /lfs/1/udingank/msmarco.nbits-2.latest/100.residuals.pt
     reading file /lfs/1/udingank/msmarco.nbits-2.latest/200.residuals.pt
     reading file /lfs/1/udingank/msmarco.nbits-2.latest/300.residuals.pt
     computation cycle 0
     computation cycle 10
     computation cycle 20
     computation cycle 30
     computation cycle 40
     computation cycle 50
     computation cycle 60
     computation cycle 70
     computation cycle 80
     computation cycle 90

     Starting random file read mmap test from /lfs/1/udingank/msmarco.nbits-2.latest
     Starting iteration 0
     reading file /lfs/1/udingank/msmarco.nbits-2.latest/0.residuals.pt
     reading file /lfs/1/udingank/msmarco.nbits-2.latest/100.residuals.pt
     reading file /lfs/1/udingank/msmarco.nbits-2.latest/200.residuals.pt
     reading file /lfs/1/udingank/msmarco.nbits-2.latest/300.residuals.pt
     computation cycle 0
     computation cycle 10
     computation cycle 20
     computation cycle 30
     computation cycle 40
     computation cycle 50
     computation cycle 60
     computation cycle 70
     computation cycle 80
     computation cycle 90

     Saving Results
     --------------
     Results saved to ./experiments/mmap_test/results-hdd-no-coalesce.png

     control_basic: 19.14160 GB
     mmap_basic: 0.00373 GB
     control_compute: 19.14687 GB
     mmap_compute: 0.01581 GB

     Timing Summary
     --------------

       Timing              |  Control (ms)  |  MMap (ms)
       ----------------------|----------------|--------------
        initial load         | 12354          |  26
         copy + compute avg   | 0.75          |  0.85
          total copy + compute | 2626          |  2686

          Finished MMap stress test
