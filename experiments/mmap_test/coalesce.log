$ python3 colbert/tests/mmap_test.py --target_dir=./experiments/mmap_test --test_iter=1 --coalesce

Starting MMap stress test with coalescing set to True, 354 residuals, and 100 compute cycles

Starting random file read control test from /lfs/0/udingank/msmarco.nbits-2.latest
Starting iteration 0
reading file /lfs/0/udingank/msmarco.nbits-2.latest/0.residuals.pt
reading file /lfs/0/udingank/msmarco.nbits-2.latest/100.residuals.pt
reading file /lfs/0/udingank/msmarco.nbits-2.latest/200.residuals.pt
reading file /lfs/0/udingank/msmarco.nbits-2.latest/300.residuals.pt
computation cycle 0
computation cycle 10
computation cycle 20
computation cycle 30
computation cycle 40
computation cycle 50
computation cycle 60
computation cycle 70
computation cycle 80
computation cycle 90

Starting random file read mmap test from /lfs/0/udingank/msmarco.nbits-2.latest
Starting iteration 0
reading file /lfs/0/udingank/msmarco.nbits-2.latest/0.residuals.pt
reading file /lfs/0/udingank/msmarco.nbits-2.latest/100.residuals.pt
reading file /lfs/0/udingank/msmarco.nbits-2.latest/200.residuals.pt
reading file /lfs/0/udingank/msmarco.nbits-2.latest/300.residuals.pt
computation cycle 0
computation cycle 10
computation cycle 20
computation cycle 30
computation cycle 40
computation cycle 50
computation cycle 60
computation cycle 70
computation cycle 80
computation cycle 90

Saving Results
--------------
Results saved to ./experiments/mmap_test/results-ssd.png

control_basic: 19.13820 GB
mmap_basic: 19.16721 GB
control_compute: 38.27598 GB
mmap_compute: 38.27320 GB

Timing Summary
--------------

  Timing   |  Control  |  MMap
  -----------|-----------|--------------
   read time | 14.76269  |  1.88503
    copy time | 1.17140  |  1.15340
      compute  | 0.00360  |  0.00306
         total   | 242.67983  |  241.50607

         Starting random file read control test from /lfs/1/udingank/msmarco.nbits-2.latest
         Starting iteration 0
         reading file /lfs/1/udingank/msmarco.nbits-2.latest/0.residuals.pt
         reading file /lfs/1/udingank/msmarco.nbits-2.latest/100.residuals.pt
         reading file /lfs/1/udingank/msmarco.nbits-2.latest/200.residuals.pt
         reading file /lfs/1/udingank/msmarco.nbits-2.latest/300.residuals.pt
         computation cycle 0
         computation cycle 10
         computation cycle 20
         computation cycle 30
         computation cycle 40
         computation cycle 50
         computation cycle 60
         computation cycle 70
         computation cycle 80
         computation cycle 90

         Starting random file read mmap test from /lfs/1/udingank/msmarco.nbits-2.latest
         Starting iteration 0
         reading file /lfs/1/udingank/msmarco.nbits-2.latest/0.residuals.pt
         reading file /lfs/1/udingank/msmarco.nbits-2.latest/100.residuals.pt
         reading file /lfs/1/udingank/msmarco.nbits-2.latest/200.residuals.pt
         reading file /lfs/1/udingank/msmarco.nbits-2.latest/300.residuals.pt
         computation cycle 0
         computation cycle 10
         computation cycle 20
         computation cycle 30
         computation cycle 40
         computation cycle 50
         computation cycle 60
         computation cycle 70
         computation cycle 80
         computation cycle 90

         Saving Results
         --------------
         Results saved to ./experiments/mmap_test/results-hdd.png

         control_basic: 19.13613 GB
         mmap_basic: 19.16541 GB
         control_compute: 38.27438 GB
         mmap_compute: 38.27160 GB

         Timing Summary
         --------------

           Timing   |  Control  |  MMap
           -----------|-----------|--------------
            read time | 14.78409  |  1.82461
             copy time | 1.23404  |  1.14321
               compute  | 0.00624  |  0.00409
                  total   | 251.16945  |  240.13128

                  Finished MMap stress test
